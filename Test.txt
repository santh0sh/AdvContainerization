* Resequence group ids contiguously (1..G) for the given (pageId, compCounter),
     * preserving rows within each group. Oracle-native using DENSE_RANK().
     */
    @Modifying
    @Transactional
    @Query(value = """
        WITH grp_map AS (
            SELECT old_grp,
                   DENSE_RANK() OVER (ORDER BY old_grp) AS new_grp
            FROM (
                SELECT DISTINCT GRP_COUNTER AS old_grp
                FROM MY_ATTR
                WHERE PAGE_ID = :pageId
                  AND COMP_COUNTER = :compCounter
            )
        )
        UPDATE MY_ATTR t
           SET t.GRP_COUNTER = (
               SELECT m.new_grp
               FROM grp_map m
               WHERE m.old_grp = t.GRP_COUNTER
           )
         WHERE t.PAGE_ID = :pageId
           AND t.COMP_COUNTER = :compCounter
        """, nativeQuery = true)
    void resequenceGroupsOracle(@Param("pageId") Long pageId,
                                @Param("compCounter") Integer compCounter);
}
